<div class="hidden lg:flex fixed min-h-screen w-64 flex-col pt-12 pb-6 px-4 bg-gradient-to-b from-blue-50 via-blue-100 to-gray-50 shadow-xl z-10 border-r border-gray-200" id="sidebar">
    <!-- Logo -->
    <div class="mb-8 pl-2">
        <a class="md_dashboard_logo" href="/">
            <%= image_tag('cfs-dark.png', class:'h-auto w-12 hover:scale-105 transition-transform') %>
        </a>
    </div>

    <!-- Main Navigation -->
    <nav class="flex-1 flex flex-col overflow-y-auto">
        <!-- Dashboard (always visible) -->
        <a href="/" class="group flex items-center gap-3 py-2 px-3 mb-1 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
            <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                dashboard
            </span>
            <span class="font-medium text-gray-700 group-hover:text-blue-800">Dashboard</span>
        </a>

        <!-- Role-Specific Sections -->
        <% if current_user.role == 'admin' %>
            <!-- Admin Mega Menu -->
            <div class="mb-2">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2">Administration</div>
                
                <!-- Accounts Section -->
                <div class="mb-1">
                    <a href="/accounts/all_accounts" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            manage_accounts
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Accounts</span>
                    </a>
                </div>
                
                <!-- Analytics Section -->
                <div class="mb-1">
                    <a href="/kpis" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            data_exploration
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">KPI's</span>
                    </a>
                </div>
                
                <!-- Scheduling Section -->
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2 mt-4">Scheduling</div>
                
                <div class="space-y-1">
                    <a href="/coach_calendar" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            calendar_month
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Calendars</span>
                    </a>
                    
                    <a href="/time_slots" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            work_history
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Time Slots</span>
                    </a>
                </div>
                
                <!-- Content Section -->
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2 mt-4">Content</div>
                
                <div class="space-y-1">
                    <a href="/questionnaires/reports" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            description
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Reports</span>
                    </a>
                    
                    <a href="/admin/content" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            folder
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Content</span>
                    </a>
                </div>
                
                <!-- Events Section -->
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2 mt-4">Events</div>
                
                <div class="space-y-1">
                    <a href="/taster_session_bookings" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            sprint
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Taster Sessions</span>
                    </a>
                    
                    <a href="/dcpa_events" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">event</span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Events</span>
                    </a>
                </div>
            </div>

        <% elsif current_user.role == 'coach' %>
            <!-- Coach Mega Menu -->
            <div class="mb-2">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2">Coach Tools</div>
                
                <div class="space-y-1">
                    <a href="/accounts/all_accounts" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            manage_accounts
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Accounts</span>
                    </a>
                    
                    <a href="/coach_calendar" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            calendar_month
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Calendar</span>
                    </a>
                </div>
            </div>

        <% elsif current_user.role == 'parent_user' %>
            <!-- Parent User Menu -->
            <div class="mb-2">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2">Parent Tools</div>
                <!-- Add parent-specific items here -->
            </div>

        <% elsif current_user.role == 'child_user' %>
            <!-- Child User Menu -->
            <div class="mb-2">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2">My Profile</div>
                
                <div class="space-y-1">
                    <% if !current_user.athlete_profile.nil? %>
                    <a href="/athlete_profiles/<%=current_user.athlete_profile.id%>" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            bar_chart
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Progress</span>
                    </a>
                    <% end %>
                    
                    <a href="/users/<%=current_user.id%>" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            face
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Profile</span>
                    </a>
                </div>
            </div>

        <% elsif current_user.role == 'athlete' %>
            <!-- Athlete Menu -->
            <div class="mb-2">
                <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 py-2">Athlete Tools</div>
                
                <div class="space-y-1">
                    <a href="/athlete_profiles/<%=current_user.athlete_profile.id%>" class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors nav_item">
                        <span class="material-symbols-outlined text-blue-600 group-hover:text-blue-800">
                            account_circle
                        </span>
                        <span class="font-medium text-gray-700 group-hover:text-blue-800">Profile</span>
                    </a>
                </div>
            </div>
        <% end %>
    </nav>

    <!-- Footer with User Profile and Logout -->
    <div class="sidebar-footer pt-4 border-t border-gray-200 mt-auto">
        <div class="flex items-center gap-3 mb-4 p-2 rounded-lg hover:bg-blue-100/50 transition-colors">
            <%= image_tag(current_user.avatar_thumbnail, class:"w-8 h-8 rounded-full shadow-sm object-cover border border-gray-200") if current_user.avatar_thumbnail.present? %>
            <div class="user-info">
                <div class="user-name text-sm font-medium text-gray-700"><%= current_user.full_name %></div>
                <div class="user-role text-xs text-gray-500 capitalize"><%= current_user.role %></div>
            </div>
        </div>
        
        <div class="group flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-blue-100/50 transition-colors cursor-pointer">
            <span class="material-symbols-outlined text-gray-600 group-hover:text-red-500">
                logout
            </span>
            <%= button_to "Logout", destroy_user_session_path, method: :delete, class: "font-medium text-gray-700 group-hover:text-red-500 bg-transparent border-none cursor-pointer" %>
        </div>
    </div>
</div>

<!-- Add this to your CSS or style tag -->
<style>
    #sidebar {
        scrollbar-width: thin;
        scrollbar-color: #bfdbfe #f0f9ff;
    }
    
    #sidebar::-webkit-scrollbar {
        width: 4px;
    }
    
    #sidebar::-webkit-scrollbar-track {
        background: #f0f9ff;
    }
    
    #sidebar::-webkit-scrollbar-thumb {
        background-color: #bfdbfe;
        border-radius: 4px;
    }
    
    .nav_item {
        transition: all 0.2s ease;
    }
    
    .nav_item:hover {
        transform: translateX(2px);
    }
    
    .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
</style>