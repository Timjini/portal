<script defer>
function onDocumentReady(callback) {
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', callback);
    } else {
        callback();
    }
}
onDocumentReady(function() {
    const toggleLinks = document.querySelectorAll('.toggle-link');
    const toggleSections = document.querySelectorAll('.toggle-section');

    toggleLinks.forEach(link => {
        link.addEventListener('click', function(event) {
            event.preventDefault();

            const targetId = link.getAttribute('href').substring(1);

            toggleSections.forEach(section => {
                if (section.id === targetId) {
                    section.style.display = 'flex';
                    section.style.flexDirection = 'column';
                } else {
                    section.style.display = 'none';
                }
            });
        });
    });
});

document.addEventListener("DOMContentLoaded", function() {
    const passwordInput = document.getElementById('password');
    const passwordConfrim = document.getElementById('passwordConfrim');
    const message = document.getElementById('message');

    passwordConfirm.addEventListener("input", function(){
        if (passwordConfirm.value !== passwordInput.value) {
            passwordConfirm.classList.add('warning');
        } else {
            passwordConfirm.classList.remove('warning');
        }
    })
});

document.addEventListener("DOMContentLoaded", function() {
    const email = document.getElementById('email');
    const firstName = document.getElementById('firstName');
    const lastName = document.getElementById('lastName');
    const password = document.getElementById('password');
    const passwordConfirmInput = document.getElementById('passwordConfirm');
    const nextBtn = document.getElementById('next');

    // Function to check if all fields are filled
    function checkFields() {
        if (email.value.trim() !== '' && firstName.value.trim() !== '' && lastName.value.trim() !== '' 
            && password.value.trim() !== '' && passwordConfirmInput.value.trim() !== '' ) {
            nextBtn.classList.remove('no-visibility');
        } else {
            nextBtn.classList.add('no-visibility');
        }
    }

    // Call the checkFields function whenever the user interacts with the fields
    email.addEventListener('input', checkFields);
    firstName.addEventListener('input', checkFields);
    lastName.addEventListener('input', checkFields);

    // Call checkFields once to initialize the button visibility
    checkFields();
});






</script>

<% @links =  ["Step1", "Step2"] %>
 <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |form| %>
    <main class="sign-up-form ">
        <section id="<%=@links.first.downcase%>" class="toggle-section bg-slate-50 dark:bg-transparent dark:bg-gradient-to-tl dark:from-gray-900 dark:to-slate-800 shadow-soft-xl rounded-2xl bg-clip-border " style="display:flex;">
                <input type="hidden" id="user-id" value="user.id" class="here">
                <article class=" p-10 flex flex-col justify-between rounded-xl text-gray-500 xl:col-span-2 transform duration-500 hover:-translate-y-1 cursor-pointer dark:text-gray-100">
                                <div>
                                    <h2 class="mt-2 text-2xl font-light text-gray-500  dark:text-gray-100 leading-snug  min-h-10 text-center"> Personal Information</h2>
                                    <p class="my-2 font-light text-center">create an account</p>
                                </div>
                                <div class="mb-5 text-center" data-controller="avatar">
                                    <div class="mx-auto w-28 h-28 mb-2 border rounded-full relative bg-gray-100 mb-4 shadow-inset" > 
                                        <img id="image" class="object-cover w-full h-28 rounded-full" src="/assets/user-5d0a17a1a8c6db61a57ce05ef2b6c77a97a706da7cf250f27964a31a89df1414.png" alt="Avatar Preview" data-avatar-target="image">
                                    </div>

                                    <label for="avatarInput" type="button" class="cursor-pointer inline-flex justify-between items-center focus:outline-none border py-2 px-4 rounded-lg shadow-sm text-left text-gray-600 bg-white hover:bg-gray-100 font-medium">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="inline-flex flex-shrink-0 w-6 h-6 -mt-1 mr-1" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <rect x="0" y="0" width="24" height="24" stroke="none"></rect>
                                                        <path d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"></path>
                                                        <circle cx="12" cy="13" r="3"></circle>
                                                    </svg>
                                                    Browse Photo
                                    </label>

                                    <div class="mx-auto w-48 text-gray-500 text-xs text-center mt-1">Click to add profile picture</div>
                                        <%= form.file_field :avatar, class: "hidden", id: "avatarInput", data: { avatar_target: "input" } %>
                                </div>           
                                <div class="mt-2 ">
                                    <label for="email" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Email</label>    
                                    <%= form.email_field :email,id:"email", placeholder:"email@example.com", class:"m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>
                                </div>
                                <div class="form-fields">
                                    <div class="">
                                        <label for="first_name" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">First Name</label>
                                        <%= form.text_field :first_name,id:"firstName", placeholder: "John", class: "m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>          
                                    </div>
                                    <div class="">
                                        <label for="last_name" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Last Name</label>
                                        <%= form.text_field :last_name,id:"lastName", placeholder: "Smith", class: "m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>    
                                    </div>
                                </div>
                                <div class="form-fields">
                                    <div class="">
                                     <label for="password" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Password</label>
                                     <%= form.password_field :password,id:"password", placeholder: "******", class: "m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>          
                                    </div>
                                    <div class="">
                                    <label for="confrim_password" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Confirm Password</label>
                                     <%=form.password_field :password_confirmation,id:"passwordConfirm" , placeholder:"******", class:"m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>
                                    </div>
                                </div>
                                <div class="mt-16 flex justify-between inset-x-0 bottom-0">
                                    <a href="#<%=@links.first.downcase%>" onclick="handleClick(this)" class="toggle-link no-visibility">
                                    <span class="p-3  border-2 border-gray-200 rounded-md text-base hover:bg-gray-200 hover:border-gray-200 cursor-pointer hover:text-black ">
                                    Back
                                    </span>
                                    </a>

                                    <a href="#<%=@links.second.downcase%>" id="next" onclick="handleClick(this)" class="toggle-link no-visibility">
                                        <span class="p-3  border-2 border-gray-200 rounded-md text-base hover:bg-gray-200 hover:border-gray-200 cursor-pointer hover:text-black ">
                                        Next
                                        </span>
                                    </a> 

                                </div>
                </article>
        </section>
        <section  id="<%=@links.second.downcase%>" class="toggle-section bg-slate-50 dark:bg-transparent dark:bg-gradient-to-tl dark:from-gray-900 dark:to-slate-800 shadow-soft-xl rounded-2xl bg-clip-border ">
                <article class=" p-10 flex flex-col h-screen justify-between rounded-xl text-gray-500 xl:col-span-2 transform duration-500 hover:-translate-y-1 cursor-pointer dark:text-gray-100">
                                <div class=" mt-2 mb-10">
                                    <h2 class="mt-5 mb-24 text-2xl font-light text-gray-500  dark:text-gray-100 leading-snug  min-h-10 text-center"> Personal Information</h2>
                                    <div class="flex flex-row">
                                        <div class="mx-1">
                                            <label for="phone" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Phone</label>
                                            <%= form.text_field :phone,id:"user-phone", placeholder: "+44 ", class: "m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>          
                                        </div>
                                        <div class="mx-1">
                                            <label for="address" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">Address</label>
                                            <%= form.text_field :address,id:"user-address", placeholder: "61 Meridian Wy., London N9 0AR, United Kingdom", class: "m-2 rounded bg-gray-50 border text-gray-900  block flex-1 min-w-0 w-full text-sm border-gray-300 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white" %>    
                                        </div>
                                    </div>
                                    <div class="mx-2 mt-10">
                                        <label for="email" class="block m-2 text-sm font-medium text-gray-500 dark:text-white">I' am</label>
                        
                                        <div class="flex m-2">
                                            <label
                                                class="flex justify-start items-center text-truncate rounded-lg bg-white pl-4 pr-6 py-3 shadow-sm mr-4">
                                                <div class="text-teal-600 mr-3">
                                                <%= form.radio_button :role, 1, id: "parent_role", class:"form-radio focus:outline-none focus:shadow-outline" %>
                                                </div>
                                                <div class="select-none text-gray-700">a Parent of an Athlete(s)</div>
                                            </label>

                                            <label
                                                class="flex justify-start items-center text-truncate rounded-lg bg-white pl-4 pr-6 py-3 shadow-sm">
                                                <div class="text-teal-600 mr-3">
                                                <%= form.radio_button :role, 0, id: "athlete_role", class:"form-radio focus:outline-none focus:shadow-outline" %>
                                                <%= form.radio_button :role, nil, id: "no_role", class:"hidden" %>
                                                </div>
                                                <div class="select-none text-gray-700">an Athlete</div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between">
                                    <a href="#<%=@links.first.downcase%>" onclick="handleClick(this)" class="toggle-link" style="margin-top:15px;">
                                    <span class="p-3  border-2 border-gray-200 rounded-md text-base hover:bg-gray-200 hover:border-gray-200 cursor-pointer hover:text-black ">
                                    Back
                                    </span>
                                    </a>

                                    <%= form.submit "Save", class: "confirm-btn" %>

                                </div>
                </article>
        </section>
    </main>
    <%end%>